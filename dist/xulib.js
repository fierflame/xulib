!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xulib=t():e.xulib=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"copyObject",function(){return y});var i={};n.r(i),n.d(i,"once",function(){return b}),n.d(i,"merge",function(){return g}),n.d(i,"queue",function(){return _}),n.d(i,"ignore",function(){return x});var o={};n.r(o),n.d(o,"set",function(){return B}),n.d(o,"clean",function(){return z}),n.d(o,"open",function(){return M}),n.d(o,"test",function(){return S}),n.d(o,"uriMethod",function(){return H});var u={};let c;n.r(u),n.d(u,"setHook",function(){return N}),n.d(u,"compare",function(){return $}),n.d(u,"normalize",function(){return G}),n.d(u,"stringify",function(){return J}),n.d(u,"parse",function(){return K}),n.d(u,"exec",function(){return Q}),n.d(u,"test",function(){return W}),n.d(u,"setOperation",function(){return X}),n.d(u,"clearOperation",function(){return Y}),n.d(u,"setMethod",function(){return Z}),n.d(u,"clearMethod",function(){return ee}),n.d(u,"cmdMethod",function(){return te});class s{static emit(e,...t){return c.emit(e,...t)}static names(){return c.names()}static listenerCount(e){return c.listenerCount(e)}static listeners(e){return c.listeners(e)}static addListener(e,t){return c.addListener(e,t)}static prependListener(e,t){return c.prependListener(e,t)}static once(e,t){return c.once(e,t)}static prependOnceListener(e,t){return c.prependOnceListener(e,t)}static removeListener(e,t){return c.removeListener(e,t)}static removeAllListeners(e){return c.removeAllListeners(e)}static on(e,t){return c.on(e,t)}static off(e,t){return c.off(e,t)}constructor(){var e,t,n;n={},(t="_linsters")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this._linsters={}}emit(e,...t){let n=this._linsters[e];if(n){for(let e=0,r=n.length;e<r;){let[i,o]=n[e];try{i(...t)}catch(e){}o?(n.splice(e,1),r--):e++}n.length||delete this._linsters[e]}}names(){return Object.keys(this._linsters)}listenerCount(e){let t=this._linsters[e];return t?t.length:0}listeners(e){let t=this._linsters[e];return t?t.map(([e])=>e):[]}addListener(e,t){if("function"!=typeof t)return;let n=this._linsters[e];n||(n=this._linsters[e]=[]),n.push([t])}prependListener(e,t){if("function"!=typeof t)return;let n=this._linsters[e];n||(n=this._linsters[e]=[]),n.unshift([t])}once(e,t){if("function"!=typeof t)return;let n=this._linsters[e];n||(n=this._linsters[e]=[]),n.push([t,!0])}prependOnceListener(e,t){if("function"!=typeof t)return;let n=this._linsters[e];n||(n=this._linsters[e]=[]),n.unshift([t,!0])}removeListener(e,t){if("function"!=typeof t)return;let n=this._linsters[e];if(n){for(let e=0,r=n.length;e<r;e++)if(n[e][0]===t){n.splice(e,1);break}n.length||delete this._linsters[e]}}removeAllListeners(e){e?delete this._linsters[e]:this._linsters={}}on(e,t){return this.addListener(e,t)}off(e,t){return this.removeListener(e,t)}}c=new s;var f=s;function a(e,t,n,r,i,o,u){try{var c=e[o](u),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function u(e){a(o,r,i,u,c,"next",e)}function c(e){a(o,r,i,u,c,"throw",e)}u(void 0)})}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d{constructor(){p(this,"_pausing",!1),p(this,"_pause",0),p(this,"_paused",0),p(this,"_begin",0),this._pausing=!1,this._pause=0,this._paused=0,this._begin=d.getTime()}static next(e,...t){var n=this;return l(function*(){return new Promise(r=>e.call(n,r,...t))})()}static nextRescissible(e,t,...n){let r=!1,i=void 0,o=void 0;const u=new Promise((u,c)=>{if(r)return void 0===i?u():c(i);const s=e.call(this,()=>{r=!0,u()},...n);o=e=>{if(!r)return r=!0,t(s),void 0===e?u():c(e)}});return u.cancel=e=>{r||(o&&o(e),i=e,r=!0)},u}static delayed(e){return d.nextRescissible(t=>setTimeout(t,e),clearTimeout)}static nextFrame(e){return l(function*(){return d.nextRescissible(e.requestAnimationFrame.bind(e),e.cancelAnimationFrame.bind(e))})()}static getTime(){try{return performance.now()}catch(e){}return+new Date}run(){this._pausing&&(this._pausing=!1,this._paused+=d.getTime()-this._pause)}pause(){this._pausing||(this._pausing=!0,this._pause=d.getTime())}get paused(){return this._paused+(this._pausing?d.getTime()-this._pause:0)}get time(){return(this._pausing?this._pause:d.getTime())-this._begin-this._paused}get(){return this.time}}var h=d;function y(e,t){if(!t){if(!e)return e;if("function"==typeof e)return;if(e instanceof Array)return e.map(e=>y(e));if("object"==typeof e){let t={};return Object.keys(e).forEach(n=>t[n]=y(e[n])),t}return e}if(e&&"object"==typeof e&&t&&"object"==typeof t)if(t instanceof Array){for(let n=0;n<t.length;n++)if(n in e)switch(typeof t[n]){case"string":t[n]=String(e[n]);break;case"boolean":t[n]=Boolean(e[n]);break;case"number":t[n]=Number(e[n]);break;case"object":e&&y(e[n],t[n])}}else for(let n in t)if(n in e)switch(typeof t[n]){case"string":t[n]=String(e[n]);break;case"boolean":t[n]=Boolean(e[n]);break;case"number":t[n]=Number(e[n]);break;case"object":e&&y(e[n],t[n])}}function m(e,t,n,r,i,o,u){try{var c=e[o](u),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function u(e){m(o,r,i,u,c,"next",e)}function c(e){m(o,r,i,u,c,"throw",e)}u(void 0)})}}function b(e){let t,n=!1,r=!1;return function(...i){if(n){if(r)throw t;return t}n=!0;try{return t=e.call(this,...i)}catch(e){throw r=!0,t=e}}}function g(e){let t;return function(){var n=v(function*(...n){if(t)return t;try{return t=e.call(this,...n),yield t}finally{t=void 0}});return function(e){return n.apply(this,arguments)}}()}function _(e,t=1){const n=[];let r=0;function i(e){return function(){var i=v(function*(...i){try{return yield new Promise(e=>r<t?e(void r++):n.push(e)),yield e.call(this,...i)}finally{n.length?n.shift()():r--}});return function(e){return i.apply(this,arguments)}}()}return"function"==typeof e?i(e):Array.isArray(e)?e.map(e=>"function"==typeof e?void 0:i(e)):void 0}function x(e,t=1){let n,r=0,i=[];function o(){let e=i;return i=[],e}function u(){let e=n;return n=void 0,e}function c(e){n=e}function s(e){return f.apply(this,arguments)}function f(){return(f=v(function*(n){if(r>=t)return c(n);r++;const i=o();let f,a=!1;try{f=yield e.call(...n)}catch(e){f=e,a=!0}for(let e of i)e[a?1:0](f);r--;const l=u();return l?s(l):void 0})).apply(this,arguments)}return function(){var e=v(function*(...e){return new Promise((t,n)=>{i.push([t,n]),s([this,...e])})});return function(t){return e.apply(this,arguments)}}()}let j=Promise.resolve(),w=!1;function O(e){if(!0===e)return j.then(()=>w=!0);if(e)return(j=j.then(t=>"function"==typeof e?e():e).catch(()=>!0)).then(()=>w=!0);if(w)return!0;if("function"==typeof O.uninitHandle)try{O.uninitHandle()}catch(e){}return!1}O.uninitHandle=void 0;var P=O;function L(e,t,n,r,i,o,u){try{var c=e[o](u),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function T(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function u(e){L(o,r,i,u,c,"next",e)}function c(e){L(o,r,i,u,c,"throw",e)}u(void 0)})}}let k={};function A(e){if(!e)return"";let[,t]=/^([a-z\-\+0-9\.]+)\:/i.exec(e)||[,""];return t.toLowerCase()}function B(e,{open:t,test:n}){return!(!e||"string"!=typeof e)&&("function"==typeof t&&([,e]=/^([a-z\-\+0-9\.]+)\:?$/i.exec(e)||[,""],!!e&&("function"!=typeof n&&(n=void 0),k[e.toLowerCase()]={open:t,test:n},!0)))}function z(e){e&&"string"==typeof e&&delete k[e]}function M(e,t){return C.apply(this,arguments)}function C(){return(C=T(function*(e,t){let n=A(e);if(!(n&&n in k))return!1;let r=k[n];return Boolean(yield r.open(e,t))})).apply(this,arguments)}function S(e){let t=A(e);if(!(t&&t in k))return!1;let n=k[t];return Boolean(!n.test||n.test(e))}function R(e){return e||""}const H={exec:({uri:e,replace:t,url:n})=>T(function*(){return!!(e=e||n)&&M(e,t)})(),test:({uri:e,url:t})=>!!(e=e||t)&&S(e||t),compare:(e,t)=>R(e.uri||e.url)===R(t.uri||t.url)&&Boolean(e.replace)===Boolean(t.replace),parse(e){if(e)return{uri:e}},stringify:({uri:e,url:t})=>e||t||"",normalize:({uri:e,replace:t,url:n})=>({replace:t,uri:R(e||n)})};function F(e,t,n,r,i,o,u){try{var c=e[o](u),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function q(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function u(e){F(o,r,i,u,c,"next",e)}function c(e){F(o,r,i,u,c,"throw",e)}u(void 0)})}}let E,I={};function N(e){E=e}function U(e,t,n,...r){if(!(e in I))return n;const i=I[e],o=i[t];if(!o)return n;try{return o.call(i,...r)}catch(e){return n}}let D={};function $(e,t){return!(!(e=K(e))||"object"!=typeof e)&&(!(!(t=K(t))||"object"!=typeof t)&&(e.method===t.method&&Boolean(U(e.method,"compare",!1,e,t))))}function G(e){if(!((e=K(e))&&e instanceof Object))return;let{method:t,replace:n,execTip:r,execTitle:i}=e;return t in I&&(delete(e=Object.assign({},e)).execTip,delete e.execTitle,e=U(t,"normalize",e,e))?(e.method=t,n?e.replace=!0:delete e.replace,r&&"string"==typeof r&&(e.execTip=r,i&&"string"==typeof i&&(e.execTitle=i)),e):void 0}function J(e){if("string"==typeof e)return e;if(!e||"object"!=typeof e)return"";let{method:t,replace:n}=e;return t&&"string"==typeof t?"string"!=typeof(e=U(t,"stringify","",e))?"":("exec"!==t&&(e=e?t+":"+e:":"+e),e&&n&&"@"!==e[0]&&(e="@"+e),e):""}function K(e){if("string"!=typeof e)return e;let t=!1,n="";for("@"==e[0]&&(t=!0,e=e.substr(1));"@"==e[0];)e=e.substr(1);if(-1!==e.indexOf(":")){let t=e.indexOf(":"),r=decodeURIComponent(e.substr(t+1)),i=decodeURIComponent(e.substr(0,t));i||(i=r,r=""),e=U(n=i,"parse",void 0,r)}else e in D&&(e=D[e]);return e&&"object"==typeof e?(n&&(e.method=n),t&&(e.replace=t),e):void 0}function Q(e){return V.apply(this,arguments)}function V(){return(V=q(function*(e){if(!((e=K(e))&&e instanceof Object))return!1;let{method:t}=e;return t in I&&(!("function"==typeof E&&!(yield E(e)))&&Boolean(yield U(t,"exec",!1,e)))})).apply(this,arguments)}function W(e){if(!((e=K(e))&&e instanceof Object))return!1;let t=e.method;return t in I&&Boolean(U(t,"test",!0,e))}function X(e,t){e&&"string"==typeof e&&t&&"object"==typeof t&&(D[e]=t)}function Y(e){e&&"string"==typeof e?delete D[e]:D={}}function Z(e,{exec:t,test:n,compare:r,parse:i,stringify:o,normalize:u}){e&&"string"==typeof e&&"function"==typeof t&&(I[e]={exec:t,test:"function"==typeof n&&n||void 0,compare:"function"==typeof r&&r||void 0,parse:"function"==typeof i&&i||void 0,stringify:"function"==typeof o&&o||void 0,normalize:"function"==typeof u&&u||void 0})}function ee(e){e&&"string"==typeof e?delete I[e]:I={}}const te={exec:({exec:e,replace:t})=>q(function*(){return!!e&&("string"==typeof e?Q(t?"@"+e:e):(e.replace=e.replace||t,Q(e)))})(),test:({exec:e})=>W(e),parse(e){if(!e)return K(e)},stringify:({exec:e})=>J(e),normalize:({exec:e,replace:t})=>((e=G(e))&&t&&(e.replace=t),e)};n.d(t,"Event",function(){return f}),n.d(t,"Timer",function(){return h}),n.d(t,"util",function(){return r}),n.d(t,"funcctrl",function(){return i}),n.d(t,"init",function(){return P}),n.d(t,"uri",function(){return o}),n.d(t,"cmd",function(){return u})}])});
//# sourceMappingURL=xulib.js.map