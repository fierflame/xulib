{"version":3,"sources":["../src/event.ts"],"names":["event","Event","emit","eventName","args","names","listenerCount","listeners","addListener","listener","prependListener","once","prependOnceListener","removeListener","removeAllListeners","on","off","constructor","_linsters","list","i","l","length","e","splice","Object","keys","map","push","unshift"],"mappings":";;AACA,IAAIA,KAAJ;;AACA,MAAMC,KAAN,CAAW;AAEV,SAAOC,IAAP,CAAYC,SAAZ,EAA+B,GAAGC,IAAlC,EAAqD;AAAE,WAAOJ,KAAK,CAACE,IAAN,CAAWC,SAAX,EAAsB,GAAGC,IAAzB,CAAP;AAAwC;;AAC/F,SAAOC,KAAP,GAAyB;AAAC,WAAOL,KAAK,CAACK,KAAN,EAAP;AAAuB;;AACjD,SAAOC,aAAP,CAAqBH,SAArB,EAAgD;AAAE,WAAOH,KAAK,CAACM,aAAN,CAAoBH,SAApB,CAAP;AAAwC;;AAC1F,SAAOI,SAAP,CAAiBJ,SAAjB,EAA0D;AAAE,WAAOH,KAAK,CAACO,SAAN,CAAgBJ,SAAhB,CAAP;AAAmC;;AAC/F,SAAOK,WAAP,CAAmBL,SAAnB,EAAsCM,QAAtC,EAAqE;AAAE,WAAOT,KAAK,CAACQ,WAAN,CAAkBL,SAAlB,EAA6BM,QAA7B,CAAP;AAAgD;;AACvH,SAAOC,eAAP,CAAuBP,SAAvB,EAA0CM,QAA1C,EAAyE;AAAE,WAAOT,KAAK,CAACU,eAAN,CAAsBP,SAAtB,EAAiCM,QAAjC,CAAP;AAAmD;;AAC9H,SAAOE,IAAP,CAAYR,SAAZ,EAA+BM,QAA/B,EAA8D;AAAE,WAAOT,KAAK,CAACW,IAAN,CAAWR,SAAX,EAAsBM,QAAtB,CAAP;AAAwC;;AACxG,SAAOG,mBAAP,CAA2BT,SAA3B,EAA8CM,QAA9C,EAA6E;AAAE,WAAOT,KAAK,CAACY,mBAAN,CAA0BT,SAA1B,EAAqCM,QAArC,CAAP;AAAuD;;AACtI,SAAOI,cAAP,CAAsBV,SAAtB,EAAyCM,QAAzC,EAAwE;AAAE,WAAOT,KAAK,CAACa,cAAN,CAAqBV,SAArB,EAAgCM,QAAhC,CAAP;AAAkD;;AAC5H,SAAOK,kBAAP,CAA0BX,SAA1B,EAAoD;AAAE,WAAOH,KAAK,CAACc,kBAAN,CAAyBX,SAAzB,CAAP;AAA4C;;AAClG,SAAOY,EAAP,CAAUZ,SAAV,EAA6BM,QAA7B,EAA4D;AAAE,WAAOT,KAAK,CAACe,EAAN,CAASZ,SAAT,EAAoBM,QAApB,CAAP;AAAsC;;AACpG,SAAOO,GAAP,CAAWb,SAAX,EAA8BM,QAA9B,EAA6D;AAAE,WAAOT,KAAK,CAACgB,GAAN,CAAUb,SAAV,EAAqBM,QAArB,CAAP;AAAuC;;AAGtGQ,EAAAA,WAAW,GAAG;AAAA,uCAD6C,EAC7C;;AACb,SAAKC,SAAL,GAAiB,EAAjB;AACA;;AAEDhB,EAAAA,IAAI,CAACC,SAAD,EAAoB,GAAGC,IAAvB,EAA0C;AAC7C,QAAIe,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,CAAX;;AACA,QAAI,CAACgB,IAAL,EAAW;AAAC;AAAS;;AACrB,SAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGF,IAAI,CAACG,MAAzB,EAAiCF,CAAC,GAAGC,CAArC,GAAyC;AACxC,UAAI,CAACZ,QAAD,EAAWE,IAAX,IAAmBQ,IAAI,CAACC,CAAD,CAA3B;;AACA,UAAI;AAACX,QAAAA,QAAQ,CAAC,GAAGL,IAAJ,CAAR;AAAmB,OAAxB,CAAwB,OAAMmB,CAAN,EAAQ,CAAE;;AAClC,UAAIZ,IAAJ,EAAU;AAAEQ,QAAAA,IAAI,CAACK,MAAL,CAAYJ,CAAZ,EAAe,CAAf;AAAmBC,QAAAA,CAAC;AAAK,OAArC,MACK;AAAED,QAAAA,CAAC;AAAK;AACb;;AACD,QAAI,CAACD,IAAI,CAACG,MAAV,EAAkB;AAAC,aAAO,KAAKJ,SAAL,CAAef,SAAf,CAAP;AAAkC;AACrD;;AAEDE,EAAAA,KAAK,GAAa;AACjB,WAAOoB,MAAM,CAACC,IAAP,CAAY,KAAKR,SAAjB,CAAP;AACA;;AACDZ,EAAAA,aAAa,CAACH,SAAD,EAA4B;AACxC,QAAIgB,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,CAAX;AACA,WAAOgB,IAAI,GAAGA,IAAI,CAACG,MAAR,GAAiB,CAA5B;AACA;;AACDf,EAAAA,SAAS,CAACJ,SAAD,EAA0C;AAClD,QAAIgB,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,CAAX;;AACA,QAAI,CAACgB,IAAL,EAAW;AAAC,aAAO,EAAP;AAAW;;AACvB,WAAOA,IAAI,CAACQ,GAAL,CAAS,CAAC,CAAClB,QAAD,CAAD,KAAgBA,QAAzB,CAAP;AACA;;AACDD,EAAAA,WAAW,CAACL,SAAD,EAAoBM,QAApB,EAAmD;AAC7D,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAAE;AAAS;;AAC/C,QAAIU,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,CAAX;;AACA,QAAI,CAACgB,IAAL,EAAW;AAACA,MAAAA,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,IAA4B,EAAnC;AAAuC;;AACnDgB,IAAAA,IAAI,CAACS,IAAL,CAAU,CAACnB,QAAD,CAAV;AACA;;AACDC,EAAAA,eAAe,CAACP,SAAD,EAAoBM,QAApB,EAAmD;AACjE,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAAE;AAAS;;AAC/C,QAAIU,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,CAAX;;AACA,QAAI,CAACgB,IAAL,EAAW;AAACA,MAAAA,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,IAA4B,EAAnC;AAAuC;;AACnDgB,IAAAA,IAAI,CAACU,OAAL,CAAa,CAACpB,QAAD,CAAb;AACA;;AACDE,EAAAA,IAAI,CAACR,SAAD,EAAoBM,QAApB,EAAmD;AACtD,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAAE;AAAS;;AAC/C,QAAIU,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,CAAX;;AACA,QAAI,CAACgB,IAAL,EAAW;AAACA,MAAAA,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,IAA4B,EAAnC;AAAuC;;AACnDgB,IAAAA,IAAI,CAACS,IAAL,CAAU,CAACnB,QAAD,EAAW,IAAX,CAAV;AACA;;AACDG,EAAAA,mBAAmB,CAACT,SAAD,EAAoBM,QAApB,EAAmD;AACrE,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAAE;AAAS;;AAC/C,QAAIU,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,CAAX;;AACA,QAAI,CAACgB,IAAL,EAAW;AAACA,MAAAA,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,IAA4B,EAAnC;AAAuC;;AACnDgB,IAAAA,IAAI,CAACU,OAAL,CAAa,CAACpB,QAAD,EAAW,IAAX,CAAb;AACA;;AACDI,EAAAA,cAAc,CAACV,SAAD,EAAoBM,QAApB,EAAmD;AAChE,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAAE;AAAS;;AAC/C,QAAIU,IAAI,GAAG,KAAKD,SAAL,CAAef,SAAf,CAAX;;AACA,QAAI,CAACgB,IAAL,EAAW;AAAC;AAAS;;AACrB,SAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGF,IAAI,CAACG,MAAzB,EAAiCF,CAAC,GAAGC,CAArC,EAAwCD,CAAC,EAAzC,EAA6C;AAC5C,UAAID,IAAI,CAACC,CAAD,CAAJ,CAAQ,CAAR,MAAeX,QAAnB,EAA6B;AAC5BU,QAAAA,IAAI,CAACK,MAAL,CAAYJ,CAAZ,EAAe,CAAf;AACA;AACA;AACD;;AACD,QAAI,CAACD,IAAI,CAACG,MAAV,EAAkB;AAAC,aAAO,KAAKJ,SAAL,CAAef,SAAf,CAAP;AAAkC;AACrD;;AACDW,EAAAA,kBAAkB,CAACX,SAAD,EAA2B;AAC5C,QAAI,CAACA,SAAL,EAAgB;AAAE,WAAKe,SAAL,GAAiB,EAAjB;AAAsB,KAAxC,MACK;AAAE,aAAO,KAAKA,SAAL,CAAef,SAAf,CAAP;AAAmC;AAC1C;;AACDY,EAAAA,EAAE,CAACZ,SAAD,EAAoBM,QAApB,EAAmD;AACpD,WAAO,KAAKD,WAAL,CAAiBL,SAAjB,EAA4BM,QAA5B,CAAP;AACA;;AACDO,EAAAA,GAAG,CAACb,SAAD,EAAoBM,QAApB,EAAmD;AACrD,WAAO,KAAKI,cAAL,CAAoBV,SAApB,EAA+BM,QAA/B,CAAP;AACA;;AAzFS;;AA4FXT,KAAK,GAAG,IAAIC,KAAJ,EAAR;AACA,eAAeA,KAAf","sourcesContent":["export type EventListener = (...args: any[]) => void;\nlet event: Event;\nclass Event{\n\n\tstatic emit(eventName: string, ...args: any[]): void { return event.emit(eventName, ...args); }\n\tstatic names(): string[] {return event.names(); }\n\tstatic listenerCount(eventName: string): number { return event.listenerCount(eventName); }\n\tstatic listeners(eventName: string): Array<EventListener> { return event.listeners(eventName);}\n\tstatic addListener(eventName: string, listener: EventListener): void { return event.addListener(eventName, listener); }\n\tstatic prependListener(eventName: string, listener: EventListener): void { return event.prependListener(eventName, listener);}\n\tstatic once(eventName: string, listener: EventListener): void { return event.once(eventName, listener);}\n\tstatic prependOnceListener(eventName: string, listener: EventListener): void { return event.prependOnceListener(eventName, listener);}\n\tstatic removeListener(eventName: string, listener: EventListener): void { return event.removeListener(eventName, listener);}\n\tstatic removeAllListeners(eventName?: string): void { return event.removeAllListeners(eventName);}\n\tstatic on(eventName: string, listener: EventListener): void { return event.on(eventName, listener);}\n\tstatic off(eventName: string, listener: EventListener): void { return event.off(eventName, listener);}\n\n\t_linsters: { [key: string]: [EventListener, boolean?][]} = {};\n\tconstructor() {\n\t\tthis._linsters = {};\n\t}\n\n\temit(eventName: string, ...args: any[]): void {\n\t\tlet list = this._linsters[eventName];\n\t\tif (!list) {return ;}\n\t\tfor (let i = 0, l = list.length; i < l;) {\n\t\t\tlet [listener, once] = list[i];\n\t\t\ttry {listener(...args);}catch(e){}\n\t\t\tif (once) { list.splice(i, 1); l--; }\n\t\t\telse { i++; }\n\t\t}\n\t\tif (!list.length) {delete this._linsters[eventName];}\n\t}\n\n\tnames(): string[] {\n\t\treturn Object.keys(this._linsters);\n\t}\n\tlistenerCount(eventName: string): number {\n\t\tlet list = this._linsters[eventName];\n\t\treturn list ? list.length : 0;\n\t}\n\tlisteners(eventName: string): Array<EventListener> {\n\t\tlet list = this._linsters[eventName];\n\t\tif (!list) {return [];}\n\t\treturn list.map(([listener]) => listener);\n\t}\n\taddListener(eventName: string, listener: EventListener): void {\n\t\tif (typeof listener !== 'function') { return; }\n\t\tlet list = this._linsters[eventName];\n\t\tif (!list) {list = this._linsters[eventName] = [];}\n\t\tlist.push([listener]);\n\t}\n\tprependListener(eventName: string, listener: EventListener): void {\n\t\tif (typeof listener !== 'function') { return; }\n\t\tlet list = this._linsters[eventName];\n\t\tif (!list) {list = this._linsters[eventName] = [];}\n\t\tlist.unshift([listener]);\n\t}\n\tonce(eventName: string, listener: EventListener): void {\n\t\tif (typeof listener !== 'function') { return; }\n\t\tlet list = this._linsters[eventName];\n\t\tif (!list) {list = this._linsters[eventName] = [];}\n\t\tlist.push([listener, true]);\n\t}\n\tprependOnceListener(eventName: string, listener: EventListener): void {\n\t\tif (typeof listener !== 'function') { return; }\n\t\tlet list = this._linsters[eventName];\n\t\tif (!list) {list = this._linsters[eventName] = [];}\n\t\tlist.unshift([listener, true]);\n\t}\n\tremoveListener(eventName: string, listener: EventListener): void {\n\t\tif (typeof listener !== 'function') { return; }\n\t\tlet list = this._linsters[eventName];\n\t\tif (!list) {return ;}\n\t\tfor (let i = 0, l = list.length; i < l; i++) {\n\t\t\tif (list[i][0] === listener) {\n\t\t\t\tlist.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!list.length) {delete this._linsters[eventName];}\n\t}\n\tremoveAllListeners(eventName?: string): void {\n\t\tif (!eventName) { this._linsters = {}; }\n\t\telse { delete this._linsters[eventName]; }\n\t}\n\ton(eventName: string, listener: EventListener): void {\n\t\treturn this.addListener(eventName, listener);\n\t}\n\toff(eventName: string, listener: EventListener): void {\n\t\treturn this.removeListener(eventName, listener);\n\t}\n}\n\nevent = new Event;\nexport default Event;\n"],"file":"event.js"}